# Sanad - سند

<div dir="rtl">

## نظرة عامة

**سند** هو تطبيق iOS ذكي مصمم خصيصاً لكبار السن والأشخاص ذوي الاحتياجات الخاصة. يعمل التطبيق كرفيق ذكي يساعدهم على التواصل مع أفراد العائلة، تذكر الأدوية، والبقاء آمنين في حالات الطوارئ.

## المميزات الرئيسية

### 1. الشاشة الرئيسية
- ✅ أزرار كبيرة وواضحة
- ✅ اتصال سريع بالعائلة
- ✅ إرسال الموقع الحالي
- ✅ طلب المساعدة الطارئة
- ✅ واجهة بسيطة جداً

### 2. نظام الطوارئ
- ✅ إرسال الموقع تلقائياً
- ✅ إشعار جهات الاتصال الطارئة
- ✅ عد تنازلي قابل للإلغاء (30 ثانية)
- ✅ تنبيه صوتي واهتزاز

### 3. كشف السقوط
- ✅ استخدام CoreMotion للكشف عن السقوط
- ✅ تنبيه فوري: "هل أنت بخير؟"
- ✅ إرسال تلقائي للعائلة بعد 30 ثانية
- ✅ إمكانية الإلغاء اليدوي

### 4. تذكير الأدوية
- ✅ إضافة أدوية متعددة
- ✅ تحديد أوقات الجرعات
- ✅ تذكير صوتي بالعربية
- ✅ إشعارات منتظمة
- ✅ قائمة الأدوية النشطة

### 5. مشاركة الموقع
- ✅ استخدام CoreLocation
- ✅ إرسال رابط خرائط جوجل
- ✅ إرسال رابط خرائط أبل
- ✅ مشاركة سريعة عبر الرسائل

### 6. السياج الجغرافي
- ✅ تحديد منطقة المنزل
- ✅ تنبيه عند الخروج من المنطقة
- ✅ نطاق قابل للتعديل (100-2000 متر)
- ✅ إشعار تلقائي للعائلة

### 7. الأوامر الصوتية
- ✅ "اتصل بالعائلة"
- ✅ "أرسل موقعي"
- ✅ "ساعدني / مساعدة"
- ✅ "أدويتي"
- ✅ دعم كامل للغة العربية

### 8. شاشة الإعدادات
- ✅ إدارة جهات الاتصال
- ✅ تحديد جهات الاتصال الطارئة
- ✅ تعيين موقع المنزل
- ✅ تعديل حجم الخط (عادي، كبير، كبير جداً)
- ✅ تفعيل/تعطيل كشف السقوط
- ✅ تفعيل/تعطيل الأوامر الصوتية

## البنية التقنية

### معمارية MVVM
```
Sanad/
├── Models/              # نماذج البيانات
│   ├── Contact.swift
│   ├── Medication.swift
│   └── AppSettings.swift
│
├── ViewModels/          # منطق العرض
│   ├── HomeViewModel.swift
│   ├── SettingsViewModel.swift
│   └── MedicationViewModel.swift
│
├── Views/               # واجهات المستخدم
│   ├── EnhancedMainView.swift
│   ├── SettingsView.swift
│   ├── ContactsListView.swift
│   ├── EmergencyContactsView.swift
│   ├── MedicationListView.swift
│   └── GeofenceSetupView.swift
│
└── Services/            # الخدمات والمديرين
    ├── StorageManager.swift
    ├── LocationManager.swift
    ├── FallDetectionManager.swift
    ├── EnhancedVoiceManager.swift
    ├── EnhancedEmergencyManager.swift
    └── EnhancedReminderManager.swift
```

### التقنيات المستخدمة
- **SwiftUI**: بناء واجهة المستخدم
- **CoreLocation**: خدمات الموقع والسياج الجغرافي
- **CoreMotion**: كشف السقوط
- **Speech Framework**: التعرف على الصوت
- **AVFoundation**: تحويل النص إلى كلام
- **UserNotifications**: الإشعارات المحلية
- **UserDefaults**: تخزين البيانات
- **Combine**: البرمجة التفاعلية

## متطلبات التشغيل

- **Xcode**: 15.0 أو أحدث
- **iOS**: 17.0 أو أحدث
- **Swift**: 5.9 أو أحدث
- **جهاز iPhone**: للاختبار الكامل (المحاكي لا يدعم بعض المستشعرات)

## خطوات التشغيل

### 1. فتح المشروع
```bash
cd Sanad-step1-main
open Sanad.xcodeproj
```

### 2. تكوين المشروع
1. افتح Xcode
2. اختر Target: **Sanad**
3. في قسم **Signing & Capabilities**:
   - اختر Team الخاص بك
   - تأكد من Bundle Identifier فريد

### 3. إضافة الصلاحيات
تأكد من إضافة الصلاحيات التالية في Info.plist:
- ✅ Location (Always and When In Use)
- ✅ Microphone
- ✅ Speech Recognition
- ✅ Motion
- ✅ Notifications

### 4. تشغيل التطبيق
1. اختر جهاز iPhone (حقيقي أو محاكي)
2. اضغط على **Run** (⌘R)
3. انتظر حتى يتم بناء المشروع
4. سيتم تشغيل التطبيق تلقائياً

### 5. منح الأذونات
عند أول تشغيل، سيطلب التطبيق الأذونات التالية:
- ✅ الموقع (Always)
- ✅ الإشعارات
- ✅ الميكروفون
- ✅ التعرف على الصوت
- ✅ الحركة

**مهم**: اقبل جميع الأذونات لتفعيل كامل المميزات.

## الاستخدام

### إضافة جهات اتصال
1. افتح **الإعدادات**
2. اختر **إدارة جهات الاتصال**
3. اضغط على **+** لإضافة جهة اتصال
4. أدخل الاسم، رقم الهاتف، والعلاقة
5. فعّل "جهة اتصال طارئة" إذا لزم الأمر

### إضافة دواء
1. من الشاشة الرئيسية، اضغط على **الأدوية**
2. اضغط على **+**
3. أدخل اسم الدواء والجرعة
4. أضف أوقات التناول
5. احفظ

### تحديد موقع المنزل
1. افتح **الإعدادات**
2. في قسم **الموقع والسياج الجغرافي**
3. اضغط على **تحديد موقع المنزل**
4. استخدم الموقع الحالي أو حدد على الخريطة
5. احفظ

### استخدام الأوامر الصوتية
1. من الشاشة الرئيسية
2. اضغط على زر **الأوامر الصوتية**
3. قل أحد الأوامر:
   - "اتصل بالعائلة"
   - "أرسل موقعي"
   - "ساعدني"

## اختبار المميزات

### اختبار كشف السقوط
```swift
// في المحاكي، استخدم:
FallDetectionManager.shared.reportFall()
```

### اختبار الطوارئ
1. اضغط على زر **المساعدة الطارئة**
2. انتظر العد التنازلي
3. اختر "أنا بخير" للإلغاء أو "أحتاج مساعدة" للتأكيد

### اختبار السياج الجغرافي
1. حدد موقع المنزل
2. في المحاكي: Features > Location > Custom Location
3. غيّر الموقع خارج النطاق المحدد
4. سيتم إرسال تنبيه تلقائياً

## حل المشاكل الشائعة

### المشكلة: الأذونات لا تظهر
**الحل**: تأكد من أن Info.plist يحتوي على جميع مفاتيح الأذونات المطلوبة.

### المشكلة: كشف السقوط لا يعمل
**الحل**: كشف السقوط يتطلب جهاز حقيقي. المحاكي لا يدعم CoreMotion بشكل كامل.

### المشكلة: الأوامر الصوتية لا تعمل
**الحل**: 
1. تأكد من منح إذن الميكروفون والتعرف على الصوت
2. تأكد من تفعيل الأوامر الصوتية في الإعدادات
3. تحدث بوضوح باللغة العربية

### المشكلة: الإشعارات لا تظهر
**الحل**:
1. تأكد من منح إذن الإشعارات
2. تحقق من إعدادات الإشعارات في iOS
3. تأكد من أن الأدوية نشطة

## الملفات المهمة

### ملفات التكوين
- `Sanad.xcodeproj/project.pbxproj` - تكوين المشروع
- `Sanad/EnhancedInfo.plist` - الأذونات والإعدادات
- `Sanad/EnhancedSanadApp.swift` - نقطة دخول التطبيق

### الملفات الأساسية
- `Sanad/Views/EnhancedMainView.swift` - الشاشة الرئيسية
- `Sanad/Services/LocationManager.swift` - إدارة الموقع
- `Sanad/Services/FallDetectionManager.swift` - كشف السقوط
- `Sanad/Services/EnhancedEmergencyManager.swift` - نظام الطوارئ

## التطوير المستقبلي

### مميزات مقترحة
- [ ] دعم Apple Watch
- [ ] تكامل مع HealthKit
- [ ] سجل الأدوية المتناولة
- [ ] تقارير للعائلة
- [ ] دعم لغات إضافية
- [ ] تكامل مع خدمات الطوارئ الرسمية
- [ ] نظام مكافآت للالتزام بالأدوية

## الدعم والمساهمة

### الإبلاغ عن مشاكل
إذا واجهت أي مشاكل، يرجى:
1. التحقق من قسم "حل المشاكل الشائعة"
2. مراجعة سجلات Xcode
3. التأكد من تحديث Xcode و iOS

### المساهمة
نرحب بالمساهمات! يرجى:
1. Fork المشروع
2. إنشاء branch جديد
3. إجراء التعديلات
4. إرسال Pull Request

## الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام التعليمي والشخصي.

## الشكر والتقدير

شكراً لاستخدام تطبيق **سند**. نأمل أن يساعد هذا التطبيق في تحسين حياة كبار السن وأحبائهم.

---

**تم التطوير بـ ❤️ لخدمة المجتمع**

</div>
